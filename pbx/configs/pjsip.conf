; ============================================================
; SmartCMS PJSIP Configuration
; Transport definitions only - endpoints from Realtime/DB
; ============================================================

[global]
type=global
max_forwards=70
user_agent=SmartCMS-Asterisk
default_outbound_endpoint=default-endpoint
keep_alive_interval=90

; ---- System settings ----
[system]
type=system
timer_t1=500
timer_b=32000
compact_headers=no

; ============================================================
; TRANSPORT: WSS (WebSocket Secure) - for Extensions, Lines, VPW, CAS
; ============================================================
[transport-wss]
type=transport
protocol=wss
bind=0.0.0.0:8089
cert_file=/etc/asterisk/keys/asterisk.pem
priv_key_file=/etc/asterisk/keys/asterisk.key
; ca_list_file=/etc/asterisk/keys/ca.crt
method=tlsv1_2
allow_reload=yes

; ============================================================
; TRANSPORT: WS (WebSocket) - fallback tanpa TLS
; ============================================================
[transport-ws]
type=transport
protocol=ws
bind=0.0.0.0:8088
allow_reload=yes

; ============================================================
; TRANSPORT: UDP - for 3rd Party devices & Trunks/SBCs
; ============================================================
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
external_media_address=103.154.80.173
external_signaling_address=103.154.80.173
local_net=10.0.0.0/8
local_net=172.16.0.0/12
local_net=192.168.0.0/16
allow_reload=yes

; ============================================================
; TRANSPORT: TCP - fallback
; ============================================================
[transport-tcp]
type=transport
protocol=tcp
bind=0.0.0.0:5060
external_media_address=103.154.80.173
external_signaling_address=103.154.80.173
local_net=10.0.0.0/8
local_net=172.16.0.0/12
local_net=192.168.0.0/16
allow_reload=yes

; ============================================================
; Default endpoint for unmatched (reject)
; ============================================================
[default-endpoint]
type=endpoint
transport=transport-udp
context=invalid
disallow=all
allow=ulaw

; ============================================================
; NOTE: All endpoints, auths, aors are managed via 
; ODBC Realtime (MariaDB) - see sorcery.conf & extconfig.conf
; CMS creates/updates these in DB, Asterisk reads realtime
; ============================================================
